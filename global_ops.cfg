# Edit the file by setting additional variable <USECASE> at the end:
# 
export NETOP_ROOT_DIR="/Users/billy.lieberman/git/runai/netop-tools"
#export NETOP_ROOT_DIR=$(git rev-parse --show-toplevel)
export K8CIDR="192.168.0.0/16"                      # this is your k8s cluster CIDR
export K8SVER="1.28"                                # select the required K8S version
export HOST_OS="ubuntu"                             # select the host OS
export NETOP_NAMESPACE="nvidia-network-operator"    # set the nvidia network operator name space. may differ in yoyur cluster
export NETOP_APP_NAMESPACE="default"                # set the name space that your application pods will run in. may vary in your cluster
export NETOP_NETWORK_RANGE="192.169.0.0/16"         # define the IP pool for your secondary rdma network. different from the K8S CDIR
export NETOP_NETWORK_GW="192.169.0.1"               # define the gateway IP for your secondary rdma network for your cluster
export NETOP_PERNODE_BLOCKSIZE="32"                 # define the number of IP addrs that can be allocated per worker node
                                                    # inyour cluster from the nvipam pool
export PROD_VER=1 # is this a production version
if [ "${PROD_VER}" = "1" ];then
  export NETOP_VERSION="24.7.0"                     # select network operator version
# export NETOP_HELM_URL="https://helm.ngc.nvidia.com/nvidia/cloud-native/charts/network-operator-${NETOP_VERSION}.tgz"
  export HELM_NVIDIA_REPO="https://helm.ngc.nvidia.com/nvidia"     # helm repo URL
  export NETOP_HELM_URL="https://helm.ngc.nvidia.com/nvidia/charts/network-operator-${NETOP_VERSION}.tgz"  # helm chart tarball
else
  export NETOP_VERSION="24.7.0-rc.2"               # select network operator version
  export HELM_NVIDIA_REPO="https://helm.ngc.nvidia.com/nvstaging"  # helm repo URL
  export NETOP_HELM_URL="https://helm.ngc.nvidia.com/nvstaging/mellanox/charts/network-operator-${NETOP_VERSION}.tgz" # helm chart tarball
  export NGC_API_KEY=`cat /root/.ngc/config|grep apikey|cut -d' ' -f3` # dev NGC_API_KEY
  export NGC_SECRET="ngc-image-secret"                                 # dev image secret
fi

export CALICO_ROOT="3.27.2"
export CALICO_VERSION="v${CALICO_ROOT}"

export CNIPLUGINS_VERSION="v1.5.1"

if [ -z ${NETOP_ROOT_DIR} ];then
    echo "Variable NETOP_ROOT_DIR must be set in global_ops.cfg file"
    exit 1
fi
#
# select the use case to implement
#
# Replace with a different usecase scenario if necessary
# Usecase scenarios are named after a folder names under 'usecase' directory
USECASE=hostdev_rdma_sriov
#USECASE=ipoib_rdma_shared_device
#USECASE=macvlan_rdma_shared_device
#USECASE=sriovibnet_rdma
#USECASE=sriovnet_rdma

#
# select the ipam mode.
# nv-ipam: preferred scaleable > 1000's
# whereabouts small clusters < 60 nodes
#
export IPAM_TYPE="nv-ipam"
#export IPAM_TYPE="whereabouts"
#export IPAM_TYPE="dhcp"

source ${NETOP_ROOT_DIR}/usecase/${USECASE}/netop.cfg
